== Camel Example Spring Boot MitchConnect

This example shows how to receive and forward SSL encrypted
messages via MLLP. It logs the messages to a SQLite database
in its toplevel directory.  It also includes sample yaml 
routes for sending and receiving without SSL.

Once you see the "Completed initialization in x ms" message,
you can point a web browser to localhost:8080/api/routes2
to see the loaded routes, and to localhost:8080/api/routes2/load
to load a valid yaml file route
or enter valid yaml text to create a route.

If the entered yaml is not valid it will not load but there
will be no message.  If it is valid you will see it when
your browser is redirected to /api/routes2.

You can Stop and Suspend routes.  Stopped or suspended routes
can be Started.

The application.yaml file is in src/main/resources, and keystore
and truststore and port information is under camel: mllp: ssl:
for the SSL route and camel: mllp: nossl: for the unsecured send
and receive routes.

Routes in src/main/resources/[ssl2|no_ssl] are loaded on startup;
routes in src/main/resources/unloadedroutes include hello.yaml 
and hello2.yaml, which just write to the log every two 
and five seconds.  (These are suitable routes to load via 
http://localhost:8080/api/routes2/load or the button on 
http://localhost:8080/api/routes2.)

Some of the listed routes (the DB routes) are just present
and more or less irrelevant; src/main/ssl2/yamlMllpSslRoute.yaml
shows a call to jdbc which writes to the SQLite database
at mydata.db, configured in application.yaml

For the sending route to send, place an HL7 message in 
/tmp/hl7msg.txt.

Beware: this is more a learning experience product than anything
showing best practices.  Still, it provides one path to follow
should you run into trouble getting started on something similar.

=== How to run

You can run this example by installing Java21 and maven and using

    mvn spring-boot:run

=== Help and contributions

This is an in-progress hobby-level effort, and I am by no means
an expert on Camel or Spring Boot or SSL/TLS.  I just realize that
Mirth Connect is going proprietary, that it charges for SSL,
and have long thought that Apache Camel may offer an alternative.

If you hit any problem using Camel or have some feedback on Camel, then please
https://camel.apache.org/support.html[let the Camel Riders know].

If you have questions or comments about this example, which will
develop further along an unknown schedule,
let me know at mjtrac@gmail.com.

Thanks.

Mitch Trachtenberg

=== Images 

The files are in the images directory if they don't render for you
in this document.

==== Wireshark screen caps:

image::images/Unsecured1.png

image::images/Unsecured2.png

image::images/SSL.png

==== Debug output (with SSL debugging)

image::images/UnsecuredSendOutput.png

image::images/UnsecuredRcvOutput.png

image::images/SecuredRcvAndForwardOutput.png

==== Route Management Screen /api/routes2

image::images/RouteManagement.png

